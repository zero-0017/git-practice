{"filter":false,"title":"app.js","tooltip":"/jQuery/app.js","undoManager":{"mark":16,"position":16,"stack":[[{"start":{"row":0,"column":0},"end":{"row":2,"column":3},"action":"remove","lines":["$(function(){","  $('.box1').slideDown();","});"],"id":2},{"start":{"row":0,"column":0},"end":{"row":33,"column":3},"action":"insert","lines":["$(function () {","imagesProgress();","function imagesProgress () {","var container = $(‘#progress’),","progressBar = container.find(‘.progress_bar’),","progressText = container.find(‘.progress_text’),","imgLoad = imagesLoaded(‘body’),","imgTotal = imgLoad.images.length,","imgLoaded = 0,","current = 0,","progressTimer = setInterval(updateProgress, 1000 / 60);","imgLoad.on(‘progress’, function () {","imgLoaded++;","});","function updateProgress () {","var target = (imgLoaded / imgTotal) * 100;","current += (target – current) * 0.1;","progressBar.css({ width: current + ‘%’ });","progressText.text(Math.floor(current) + ‘%’);","if(current >= 100){","clearInterval(progressTimer);","container.addClass(‘progress_complete’);","progressBar.add(progressText)",".delay(500)",".animate({ opacity: 0 }, 250, function () {","container.animate({ top: ‘-100%’ }, 500);","});","}","if (current > 99.9) {","current = 100;","}","}","}","});"]}],[{"start":{"row":0,"column":0},"end":{"row":33,"column":3},"action":"remove","lines":["$(function () {","imagesProgress();","function imagesProgress () {","var container = $(‘#progress’),","progressBar = container.find(‘.progress_bar’),","progressText = container.find(‘.progress_text’),","imgLoad = imagesLoaded(‘body’),","imgTotal = imgLoad.images.length,","imgLoaded = 0,","current = 0,","progressTimer = setInterval(updateProgress, 1000 / 60);","imgLoad.on(‘progress’, function () {","imgLoaded++;","});","function updateProgress () {","var target = (imgLoaded / imgTotal) * 100;","current += (target – current) * 0.1;","progressBar.css({ width: current + ‘%’ });","progressText.text(Math.floor(current) + ‘%’);","if(current >= 100){","clearInterval(progressTimer);","container.addClass(‘progress_complete’);","progressBar.add(progressText)",".delay(500)",".animate({ opacity: 0 }, 250, function () {","container.animate({ top: ‘-100%’ }, 500);","});","}","if (current > 99.9) {","current = 100;","}","}","}","});"],"id":3},{"start":{"row":0,"column":0},"end":{"row":45,"column":0},"action":"insert","lines":["const images = document.getElementsByTagName('img'); // ページ内のimgタグを取得","const loadingArea = document.getElementById('bl_loading'); // ローディング画面全体","const percentNumber = document.getElementById('bl_loadingPercentNumber'); // ●%の●部分","const loadingGauge = document.getElementById('bl_loadingGaugeMeter'); // リアルタイムで読み込まれるゲージ部分","let imgCounting = 0;","let baseCounting = 0;","const gaugeWidth = 100; // ゲージの全体幅","let current;","","// 画像の読み込み","for (let i = 0; i < images.length; i++) {","  const img = new Image(); // 新たなimg要素を作成","  // 画像読み込み完了したとき","  img.onload = function() {","    imgCounting += 1;","  }","  // 画像読み込み失敗したとき","  img.onerror = function() {","    imgCounting += 1;","  }","  img.src = images[i].src; // ソースのパスを設定","};","","// setIntervalを使って一定時間ごとに処理を繰り返す","const nowLoading = setInterval(function () {","  // baseCountingがimgCountingより大きくならない条件の場合に処理を実行させる。2回目以降にページを読み込んだ時に画像の読み込み履歴が残っている関係で、ローディング画面の表示が速く終わってしまうため、その対策として条件をつけている。","  if(baseCounting <= imgCounting) {","    // リアルタイムで読み込んでいるパーセントを取得","    current = Math.floor(baseCounting / images.length * 100);","    // ●%の●部分に数字を置き換える","    percentNumber.innerHTML = current;","    // リアルタイムで読み込まれるゲージ部分を反映させる","    loadingGauge.style.width = Math.floor(gaugeWidth / 100 * current) + '%';","    baseCounting += 1;","","    // 全て読み込んだ時","    if (baseCounting === images.length) {","      setTimeout(function() {","        // ローディング画面全体の非表示","        loadingArea.style.display = 'none';","        // ローディングの終了","        clearInterval(nowLoading);","      }, 300);","    }","  }",""]}],[{"start":{"row":45,"column":0},"end":{"row":45,"column":7},"action":"insert","lines":["}, 50);"],"id":4}],[{"start":{"row":9,"column":0},"end":{"row":45,"column":7},"action":"remove","lines":["// 画像の読み込み","for (let i = 0; i < images.length; i++) {","  const img = new Image(); // 新たなimg要素を作成","  // 画像読み込み完了したとき","  img.onload = function() {","    imgCounting += 1;","  }","  // 画像読み込み失敗したとき","  img.onerror = function() {","    imgCounting += 1;","  }","  img.src = images[i].src; // ソースのパスを設定","};","","// setIntervalを使って一定時間ごとに処理を繰り返す","const nowLoading = setInterval(function () {","  // baseCountingがimgCountingより大きくならない条件の場合に処理を実行させる。2回目以降にページを読み込んだ時に画像の読み込み履歴が残っている関係で、ローディング画面の表示が速く終わってしまうため、その対策として条件をつけている。","  if(baseCounting <= imgCounting) {","    // リアルタイムで読み込んでいるパーセントを取得","    current = Math.floor(baseCounting / images.length * 100);","    // ●%の●部分に数字を置き換える","    percentNumber.innerHTML = current;","    // リアルタイムで読み込まれるゲージ部分を反映させる","    loadingGauge.style.width = Math.floor(gaugeWidth / 100 * current) + '%';","    baseCounting += 1;","","    // 全て読み込んだ時","    if (baseCounting === images.length) {","      setTimeout(function() {","        // ローディング画面全体の非表示","        loadingArea.style.display = 'none';","        // ローディングの終了","        clearInterval(nowLoading);","      }, 300);","    }","  }","}, 50);"],"id":5},{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":0,"column":0},"end":{"row":8,"column":0},"action":"remove","lines":["const images = document.getElementsByTagName('img'); // ページ内のimgタグを取得","const loadingArea = document.getElementById('bl_loading'); // ローディング画面全体","const percentNumber = document.getElementById('bl_loadingPercentNumber'); // ●%の●部分","const loadingGauge = document.getElementById('bl_loadingGaugeMeter'); // リアルタイムで読み込まれるゲージ部分","let imgCounting = 0;","let baseCounting = 0;","const gaugeWidth = 100; // ゲージの全体幅","let current;",""],"id":6},{"start":{"row":0,"column":0},"end":{"row":49,"column":1},"action":"insert","lines":["const progressBar = document.querySelector('.js-loader-progress-bar')","const progressNumber = document.querySelector('.js-loader-progress-number')","","const imgLoad = imagesLoaded('body');//body内の画像を監視","const imgTotal = imgLoad.images.length;//画像の総数を取得","","let imgLoaded = 0;//ロードした画像カウント","let progressSpeed = 8;//プログレスバーの進むスピード 大きいほど速くなる","let progressCount = 0;//ローディングの進捗状況 0〜100","let progressResult = 0;//ローディングの進捗状況 0〜100","","//読み込み状況をアップデート","let progressInit = setInterval(function () {","  updateProgress();","}, 25);","","//画像を一つロードするたびにimgLoadedのカウントをアップ","imgLoad.on('progress', function (instance, image) {","  imgLoaded++","})","","//読み込み状況アップデート関数","function updateProgress() {","","  //ローディング演出用の計算","  progressCount += (imgLoaded / imgTotal) * progressSpeed;","","  if(progressCount >= 100 && imgTotal > imgLoaded) {","    //カウントは100以上だが画像の読み込みが終わってない","    progressResult = 99;","  } else if(progressCount > 99.9) {","    //カウントが100以上になった","    progressResult = 100;","  } else {","    //現在のカウント","    progressResult = progressCount;","  }","","  //ローディング進捗状況をプログレスバーと数字で表示","  progressBar.style.width = progressResult + '%';","  progressNumber.innerText = Math.floor(progressResult);","","  //ローディング完了後 0.8秒待ってページを表示","  if (progressResult >= 100 && imgTotal == imgLoaded) {","    clearInterval(progressInit);","    setTimeout(function () {","      document.querySelector('body').classList.add('is-loaded');","    }, 800);","  }","}"]}],[{"start":{"row":0,"column":0},"end":{"row":49,"column":1},"action":"remove","lines":["const progressBar = document.querySelector('.js-loader-progress-bar')","const progressNumber = document.querySelector('.js-loader-progress-number')","","const imgLoad = imagesLoaded('body');//body内の画像を監視","const imgTotal = imgLoad.images.length;//画像の総数を取得","","let imgLoaded = 0;//ロードした画像カウント","let progressSpeed = 8;//プログレスバーの進むスピード 大きいほど速くなる","let progressCount = 0;//ローディングの進捗状況 0〜100","let progressResult = 0;//ローディングの進捗状況 0〜100","","//読み込み状況をアップデート","let progressInit = setInterval(function () {","  updateProgress();","}, 25);","","//画像を一つロードするたびにimgLoadedのカウントをアップ","imgLoad.on('progress', function (instance, image) {","  imgLoaded++","})","","//読み込み状況アップデート関数","function updateProgress() {","","  //ローディング演出用の計算","  progressCount += (imgLoaded / imgTotal) * progressSpeed;","","  if(progressCount >= 100 && imgTotal > imgLoaded) {","    //カウントは100以上だが画像の読み込みが終わってない","    progressResult = 99;","  } else if(progressCount > 99.9) {","    //カウントが100以上になった","    progressResult = 100;","  } else {","    //現在のカウント","    progressResult = progressCount;","  }","","  //ローディング進捗状況をプログレスバーと数字で表示","  progressBar.style.width = progressResult + '%';","  progressNumber.innerText = Math.floor(progressResult);","","  //ローディング完了後 0.8秒待ってページを表示","  if (progressResult >= 100 && imgTotal == imgLoaded) {","    clearInterval(progressInit);","    setTimeout(function () {","      document.querySelector('body').classList.add('is-loaded');","    }, 800);","  }","}"],"id":7},{"start":{"row":0,"column":0},"end":{"row":72,"column":1},"action":"insert","lines":["/* 1番目のアニメーションの場合 */",".spinner.type1 {","  border-radius: 50%;","  border-width: 8px;","  border-style: solid;","  border-color: #fff rgba(255, 255, 255, 0.12) rgba(255, 255, 255, 0.12);","  /* ローディング要素のアニメーションを指定 */","  -webkit-animation: spinner1_1 1.5s infinite linear forwards;","          animation: spinner1_1 1.5s infinite linear forwards;","}",".spinner.type1 span {","  /* Loading テキストのアニメーションを指定 */","  animation: spinner_loading_text 1.5s infinite linear forwards reverse;","}"," ","/* ローディング要素のアニメーション内容 */","@-webkit-keyframes spinner1_1 {","  0% {","    -webkit-transform: translate(-50%, -50%) rotate(0);","            transform: translate(-50%, -50%) rotate(0);","  }","  100% {","    -webkit-transform: translate(-50%, -50%) rotate(360deg);","            transform: translate(-50%, -50%) rotate(360deg);","  }","}"," ","@keyframes spinner1_1 {","  0% {","    -webkit-transform: translate(-50%, -50%) rotate(0);","            transform: translate(-50%, -50%) rotate(0);","  }","  100% {","    -webkit-transform: translate(-50%, -50%) rotate(360deg);","            transform: translate(-50%, -50%) rotate(360deg);","  }","}"," ","/* Loading テキストのアニメーション内容 */","@-webkit-keyframes spinner_loading_text {","  0% {","    opacity: 1;","    -webkit-transform: translate(-50%, -50%) rotate(0deg);","            transform: translate(-50%, -50%) rotate(0deg);","  }","  50% {","    opacity: 0;","    -webkit-transform: translate(-50%, -50%) rotate(180deg);","            transform: translate(-50%, -50%) rotate(180deg);","  }","  100% {","    opacity: 1;","    -webkit-transform: translate(-50%, -50%) rotate(360deg);","            transform: translate(-50%, -50%) rotate(360deg);","  }","}","@keyframes spinner_loading_text {","  0% {","    opacity: 1;","    -webkit-transform: translate(-50%, -50%) rotate(0deg);","            transform: translate(-50%, -50%) rotate(0deg);","  }","  50% {","    opacity: 0;","    -webkit-transform: translate(-50%, -50%) rotate(180deg);","            transform: translate(-50%, -50%) rotate(180deg);","  }","  100% {","    opacity: 1;","    -webkit-transform: translate(-50%, -50%) rotate(360deg);","            transform: translate(-50%, -50%) rotate(360deg);","  }","}"]}],[{"start":{"row":14,"column":0},"end":{"row":14,"column":1},"action":"remove","lines":[" "],"id":8},{"start":{"row":26,"column":0},"end":{"row":26,"column":1},"action":"remove","lines":[" "]},{"start":{"row":37,"column":0},"end":{"row":37,"column":1},"action":"remove","lines":[" "]}],[{"start":{"row":72,"column":1},"end":{"row":73,"column":0},"action":"insert","lines":["",""],"id":9}],[{"start":{"row":73,"column":0},"end":{"row":78,"column":1},"action":"insert","lines":["window.onload = function() {","  let spinner = document.getElementById('my-spinner');"," ","  // .box に .loaded を追加してローディング表示を消す","  spinner.classList.add('loaded');","}"],"id":10}],[{"start":{"row":75,"column":0},"end":{"row":75,"column":1},"action":"remove","lines":[" "],"id":11}],[{"start":{"row":0,"column":0},"end":{"row":78,"column":1},"action":"remove","lines":["/* 1番目のアニメーションの場合 */",".spinner.type1 {","  border-radius: 50%;","  border-width: 8px;","  border-style: solid;","  border-color: #fff rgba(255, 255, 255, 0.12) rgba(255, 255, 255, 0.12);","  /* ローディング要素のアニメーションを指定 */","  -webkit-animation: spinner1_1 1.5s infinite linear forwards;","          animation: spinner1_1 1.5s infinite linear forwards;","}",".spinner.type1 span {","  /* Loading テキストのアニメーションを指定 */","  animation: spinner_loading_text 1.5s infinite linear forwards reverse;","}","","/* ローディング要素のアニメーション内容 */","@-webkit-keyframes spinner1_1 {","  0% {","    -webkit-transform: translate(-50%, -50%) rotate(0);","            transform: translate(-50%, -50%) rotate(0);","  }","  100% {","    -webkit-transform: translate(-50%, -50%) rotate(360deg);","            transform: translate(-50%, -50%) rotate(360deg);","  }","}","","@keyframes spinner1_1 {","  0% {","    -webkit-transform: translate(-50%, -50%) rotate(0);","            transform: translate(-50%, -50%) rotate(0);","  }","  100% {","    -webkit-transform: translate(-50%, -50%) rotate(360deg);","            transform: translate(-50%, -50%) rotate(360deg);","  }","}","","/* Loading テキストのアニメーション内容 */","@-webkit-keyframes spinner_loading_text {","  0% {","    opacity: 1;","    -webkit-transform: translate(-50%, -50%) rotate(0deg);","            transform: translate(-50%, -50%) rotate(0deg);","  }","  50% {","    opacity: 0;","    -webkit-transform: translate(-50%, -50%) rotate(180deg);","            transform: translate(-50%, -50%) rotate(180deg);","  }","  100% {","    opacity: 1;","    -webkit-transform: translate(-50%, -50%) rotate(360deg);","            transform: translate(-50%, -50%) rotate(360deg);","  }","}","@keyframes spinner_loading_text {","  0% {","    opacity: 1;","    -webkit-transform: translate(-50%, -50%) rotate(0deg);","            transform: translate(-50%, -50%) rotate(0deg);","  }","  50% {","    opacity: 0;","    -webkit-transform: translate(-50%, -50%) rotate(180deg);","            transform: translate(-50%, -50%) rotate(180deg);","  }","  100% {","    opacity: 1;","    -webkit-transform: translate(-50%, -50%) rotate(360deg);","            transform: translate(-50%, -50%) rotate(360deg);","  }","}","window.onload = function() {","  let spinner = document.getElementById('my-spinner');","","  // .box に .loaded を追加してローディング表示を消す","  spinner.classList.add('loaded');","}"],"id":12},{"start":{"row":0,"column":0},"end":{"row":10,"column":9},"action":"insert","lines":["ex.js","var start = 0;","var goal = 100;","var speed = 25;"," ","setInterval(function(){","if(start <= goal){","   $('.load_per').html(start + '%');","   start++;","}","},speed);"]}],[{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"remove","lines":[" "],"id":13}],[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"remove","lines":["s"],"id":14},{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"remove","lines":["j"]},{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"remove","lines":["."]},{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"remove","lines":["x"]},{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":["e"]},{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":0,"column":0},"end":{"row":9,"column":9},"action":"remove","lines":["var start = 0;","var goal = 100;","var speed = 25;","","setInterval(function(){","if(start <= goal){","   $('.load_per').html(start + '%');","   start++;","}","},speed);"],"id":15},{"start":{"row":0,"column":0},"end":{"row":25,"column":9},"action":"insert","lines":["","2","3","4","5","6","7","8","9","10","11","12","13","var start = 1;","var goal = 100;","var speed = 25;"," ","setInterval(function(){","if(start <= goal){","   $('.load_per').html(start + '%');","   start++;","   var start_str = String(start);","   var start_width = start_str + '%';","   $('.progress-bar').css({'width': start_width});","  }","},speed);"]}],[{"start":{"row":12,"column":1},"end":{"row":12,"column":2},"action":"remove","lines":["3"],"id":16},{"start":{"row":12,"column":0},"end":{"row":12,"column":1},"action":"remove","lines":["1"]},{"start":{"row":11,"column":2},"end":{"row":12,"column":0},"action":"remove","lines":["",""]},{"start":{"row":11,"column":1},"end":{"row":11,"column":2},"action":"remove","lines":["2"]},{"start":{"row":11,"column":0},"end":{"row":11,"column":1},"action":"remove","lines":["1"]},{"start":{"row":10,"column":2},"end":{"row":11,"column":0},"action":"remove","lines":["",""]},{"start":{"row":10,"column":1},"end":{"row":10,"column":2},"action":"remove","lines":["1"]},{"start":{"row":10,"column":0},"end":{"row":10,"column":1},"action":"remove","lines":["1"]},{"start":{"row":9,"column":2},"end":{"row":10,"column":0},"action":"remove","lines":["",""]},{"start":{"row":9,"column":1},"end":{"row":9,"column":2},"action":"remove","lines":["0"]},{"start":{"row":9,"column":0},"end":{"row":9,"column":1},"action":"remove","lines":["1"]},{"start":{"row":8,"column":1},"end":{"row":9,"column":0},"action":"remove","lines":["",""]},{"start":{"row":8,"column":0},"end":{"row":8,"column":1},"action":"remove","lines":["9"]},{"start":{"row":7,"column":1},"end":{"row":8,"column":0},"action":"remove","lines":["",""]},{"start":{"row":7,"column":0},"end":{"row":7,"column":1},"action":"remove","lines":["8"]},{"start":{"row":6,"column":1},"end":{"row":7,"column":0},"action":"remove","lines":["",""]},{"start":{"row":6,"column":0},"end":{"row":6,"column":1},"action":"remove","lines":["7"]},{"start":{"row":5,"column":1},"end":{"row":6,"column":0},"action":"remove","lines":["",""]},{"start":{"row":5,"column":0},"end":{"row":5,"column":1},"action":"remove","lines":["6"]},{"start":{"row":4,"column":1},"end":{"row":5,"column":0},"action":"remove","lines":["",""]},{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"remove","lines":["5"]},{"start":{"row":3,"column":1},"end":{"row":4,"column":0},"action":"remove","lines":["",""]},{"start":{"row":3,"column":0},"end":{"row":3,"column":1},"action":"remove","lines":["4"]},{"start":{"row":2,"column":1},"end":{"row":3,"column":0},"action":"remove","lines":["",""]},{"start":{"row":2,"column":0},"end":{"row":2,"column":1},"action":"remove","lines":["3"]},{"start":{"row":1,"column":1},"end":{"row":2,"column":0},"action":"remove","lines":["",""]},{"start":{"row":1,"column":0},"end":{"row":1,"column":1},"action":"remove","lines":["2"]},{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]},{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":1},"action":"remove","lines":[" "],"id":17}],[{"start":{"row":0,"column":0},"end":{"row":12,"column":9},"action":"remove","lines":["var start = 1;","var goal = 100;","var speed = 25;","","setInterval(function(){","if(start <= goal){","   $('.load_per').html(start + '%');","   start++;","   var start_str = String(start);","   var start_width = start_str + '%';","   $('.progress-bar').css({'width': start_width});","  }","},speed);"],"id":18},{"start":{"row":0,"column":0},"end":{"row":16,"column":8},"action":"insert","lines":["var start = 1;","var goal = 100;","var speed = 25;","","setInterval(function(){","if(start <= goal){","   $('.load_per').html(start + '%');","   start++;","   var start_str = String(start);","   var start_width = start_str + '%';","   $('.progress-bar').css({'width': start_width});","  }","},speed);","","setTimeout(function(){","  $('.load_area').fadeOut(800);","},2600);"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":16,"column":8},"end":{"row":16,"column":8},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1663202495274,"hash":"827cd1b6ba1230b4d74b9922b76de8b0e3c04ad4"}